# Test 6: Client Messaging Interface Testing
# Format for message commands: turn,MSG_OP,test_name,message_text
# Format for ship orders: shipnum,turn,ORDER_KIND,magnitude

# Test 1: Basic SetMessage
1,MSG_SET,BASIC_SET,Hello World

# Test 2: SetMessage overwrites previous message
2,MSG_SET,SET_OVERWRITE_PART1,First message
2,MSG_SET,SET_OVERWRITE_PART2,Second message replaces first

# Test 3: AppendMessage to empty buffer
3,MSG_CLEAR,CLEAR_BEFORE_APPEND,
3,MSG_APPEND,APPEND_TO_EMPTY,First appended message

# Test 4: AppendMessage to existing message
4,MSG_SET,APPEND_SETUP,Initial message
4,MSG_APPEND,APPEND_TO_EXISTING, - appended part

# Test 5: Multiple appends
5,MSG_SET,MULTI_APPEND_SETUP,Start
5,MSG_APPEND,MULTI_APPEND_1, - part 1
5,MSG_APPEND,MULTI_APPEND_2, - part 2
5,MSG_APPEND,MULTI_APPEND_3, - part 3

# Test 6: ClearMessage
6,MSG_SET,CLEAR_SETUP,Message to be cleared
6,MSG_CLEAR,CLEAR_TEST,

# Test 7: Append after clear
7,MSG_CLEAR,APPEND_AFTER_CLEAR_SETUP,
7,MSG_APPEND,APPEND_AFTER_CLEAR,New message after clear

# Test 8: Zero-length message via SetMessage
8,MSG_SET,ZERO_LENGTH_SET,

# Test 9: Zero-length message via AppendMessage
9,MSG_SET,ZERO_APPEND_SETUP,Base message
9,MSG_APPEND,ZERO_LENGTH_APPEND,

# Test 10: Very long message (will truncate at 511 chars)
10,MSG_SET,LONG_MESSAGE_TRUNCATE,AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA

# Test 11: Fill buffer to capacity then try to append
11,MSG_SET,FILL_BUFFER_SETUP,XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
11,MSG_APPEND,APPEND_TO_FULL_BUFFER,This should return MSG_NO_SPACE

# Test 12: SetMessage to nearly-full buffer, then small append
12,MSG_SET,NEARLY_FULL_SETUP,XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
12,MSG_APPEND,SMALL_APPEND_TO_NEARLY_FULL, OK

# Test 13: Clear an already empty buffer
13,MSG_CLEAR,CLEAR_ALREADY_EMPTY_SETUP,
13,MSG_CLEAR,CLEAR_ALREADY_EMPTY,

# Test 14: Message sent to observer (SetMessage + ship order to verify observer sees it)
14,MSG_SET,OBSERVER_VISIBILITY_TEST,Turn 14: This message should be visible in observer
0,14,O_THRUST,10.0

# Test 15: Message persistence across operations
15,MSG_SET,PERSISTENCE_TEST,Message persists
0,15,O_THRUST,5.0
0,15,O_TURN,0.1

# End of tests - ships idle after turn 15
